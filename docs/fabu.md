
1. code-push常用命令
安装: npm install -g code-push-cli
注册账号: code-push register
登陆: code-push login
注销: code-push logout
添加项目: code-push app add [app名称]
删除项目: code-push app remove [app名称]
列出账号下的所有项目: code-push app list
显示登陆的token: code-push access-key ls
删除某个access-key: code-push access-key rm <accessKey>
添加协作人员：code-push collaborator add <appName> next@126.com
部署一个环境: code-push deployment add <appName> <deploymentName>
删除部署: code-push deployment rm <appName>
列出应用的部署: code-push deployment ls CStore<appName>
查询部署环境的key: code-push deployment ls <appName> -k
查看部署的历史版本信息: code-push deployment history <appName> <deploymentName>
重命名一个部署: code-push deployment rename <appName> <currentDeploymentName> <newDeploymentName>

https://github.com/Microsoft/react-native-code-push

code-push release-react 应用名 --platform android --deploymentName Staging --description "修复一些bug"

//android
code-push release-react qfant/Hlife android  -d Staging --des 测试 -t 1.0.0 
code-push release-react qfant/Hlife android  -d Production --des 测试 -t 1.0.0 
//ios
code-push release-react qfant/Hlife-ios ios -d Staging --des 测试 -t 1.0.0
code-push release-react qfant/Hlife-ios ios -d Production --des 测试 -t 1.0.0
查看部署的历史版本信息
code-push deployment history qfant/Hlife  Staging 
code-push deployment history qfant/Hlife  Production 
code-push deployment history qfant/Hlife-ios  Staging 
code-push deployment history qfant/Hlife-ios  Production 


测试 ok 后，提升（Promoting）到 Production 环境，并且进行灰度20%发布

code-push promote 应用名 Staging Production --rollout 20%
在生产环境验证 ok，使用 patch 将灰度修改为100%，进行全网发布：

code-push patch 应用名 Production -rollout 100%


# Release a mandatory update with a changelog
code-push release-react MyApp-iOS ios -m --description "Modified the header color"

# Release an update for an app that uses a non-standard entry file name, and also capture
# the sourcemap file generated by react-native bundle
code-push release-react MyApp-iOS ios --entryFile MyApp.js --sourcemapOutput ../maps/MyApp.map

# Release a dev Android build to just 1/4 of your end users
code-push release-react MyApp-Android android --rollout 25% --dev true

# Release an update that targets users running any 1.1.* binary, as opposed to
# limiting the update to exact version name in the build.gradle file
code-push release-react MyApp-Android android --targetBinaryVersion "~1.1.0"